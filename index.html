<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Sistema de Notas – A1 a A7</title>

<style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f4f4f4; padding: 15px; }
    h1 { text-align: center; }
    .container { background: white; padding: 15px; border-radius: 12px; box-shadow: 0 0 8px rgba(0,0,0,0.15); max-width: 550px; margin: auto; }
    select, button, input { width: 100%; padding: 10px; margin-top: 10px; border-radius: 8px; border: 1px solid #999; font-size: 16px; }
    button { background: #007bff; color: white; border: none; }
    button:hover { background: #0056b3; }
    .area-box { background: #e9e9e9; padding: 10px; border-radius: 8px; margin-top: 10px; }
</style>
</head>

<body>

<h1>Sistema de Notas A1 – A7</h1>
<div class="container">
    <label>Selecciona un área:</label>
    <select id="areaSelect">
        <option value="">-- Selecciona --</option>
        <option value="A1">A1 (3 notas)</option>
        <option value="A2">A2 (4 notas)</option>
        <option value="A3">A3 (4 notas)</option>
        <option value="A4">A4 (2 notas)</option>
        <option value="A5">A5 (2 notas)</option>
        <option value="A6">A6 (3 notas)</option>
        <option value="A7">A7 (3 notas)</option>
    </select>

    <label>Agregar nota (AD, A, B, C):</label>
    <input id="notaInput" placeholder="Ejemplo: A" maxlength="2">

    <button onclick="agregarNota()">Agregar Nota</button>
    <button onclick="borrarArea()" style="background:#b30000;">Borrar notas del área</button>
    <button onclick="borrarTodo()" style="background:#ff6600;">Borrar TODO</button>

    <hr>
    <button onclick="evaluarEstudiante()" style="background:#28a745;">Evaluar Estudiante Completo</button>

    <p id="resultadoGeneral"></p>

    <h3>Notas Registradas</h3>
    <div id="listaAreas"></div>
</div>

<script>
const limites = { A1: 3, A2: 4, A3: 4, A4: 2, A5: 2, A6: 3, A7: 3 };

if (!localStorage.getItem("notas")) {
    localStorage.setItem("notas", JSON.stringify({
        A1: [], A2: [], A3: [], A4: [], A5: [], A6: [], A7: []
    }));
}

let notas = JSON.parse(localStorage.getItem("notas"));
function guardarLS() { localStorage.setItem("notas", JSON.stringify(notas)); }

function actualizarVista() {
    let html = "";
    for (const area in notas) {
        html += `
            <div class="area-box">
                <b>${area}</b> (${notas[area].length}/${limites[area]})<br>
                Notas: ${notas[area].join(", ") || "Sin notas"}
            </div>`;
    }
    document.getElementById("listaAreas").innerHTML = html;
}

function agregarNota() {
    const area = document.getElementById("areaSelect").value;
    const nota = document.getElementById("notaInput").value.toUpperCase().trim();

    if (!area) return alert("Selecciona un área.");
    if (!["AD","A","B","C"].includes(nota)) return alert("La nota debe ser AD, A, B o C");
    if (notas[area].length >= limites[area]) return alert("Esa área ya tiene todas sus notas completas.");

    notas[area].push(nota);
    guardarLS();
    document.getElementById("notaInput").value = "";
    actualizarVista();
}

function borrarArea() {
    const area = document.getElementById("areaSelect").value;
    if (!area) return alert("Selecciona un área para borrar.");

    notas[area] = [];
    guardarLS();
    actualizarVista();
}

function borrarTodo() {
    if (!confirm("¿Seguro que deseas borrar TODO?")) return;

    for (const area in notas) notas[area] = [];
    guardarLS();
    actualizarVista();
}

function evaluarArea(notasArea) {
    let buenas = notasArea.filter(n => n === "A" || n === "AD").length;
    let malas = notasArea.filter(n => n === "C").length;
    let total = notasArea.length;

    if (buenas >= total / 2) return "PROMOCIÓN";
    if (malas > total / 2) return "PERMANENCIA";
    return "RECUPERACIÓN";
}

function evaluarEstudiante() {
    let resultados = [];

    for (const area in notas) {
        if (notas[area].length === 0) resultados.push(`${area}: ❌ No tiene notas`);
        else resultados.push(`${area}: ${evaluarArea(notas[area])}`);
    }

    document.getElementById("resultadoGeneral").innerHTML =
        `<b>Resultado General:</b><br>` + resultados.join("<br>");
}

actualizarVista();
</script>

</body>
</html>
